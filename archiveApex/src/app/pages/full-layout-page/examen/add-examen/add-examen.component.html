<div class="row text-left">
    <div class="col-sm-12">
        <div class="content-header">{{idExamen == null ? 'Ajouter un examen' : 'Modifier un examen'}}</div>
    </div>
</div>
<!-- Reactive Form Validaton Starts -->
<div class="row text-left">
    <div class="col-sm-12">
        <div class="card">
            <div class="card-content">
                <div class="card-body">
                    <form [formGroup]="regularForm" novalidate>
                        <div class="row">
                            <div class="form-group col-lg-6">
                                <label for="title">Title</label>

                                <input type="title" class="form-control" id="title" formControlName="title" required>
                                <small class="form-text text-muted danger"
                                       *ngIf="!regularForm.get('title').valid && (regularForm.get('title').dirty || regularForm.get('title').touched)">Please
                                    enter a valid title!</small>
                            </div>

                        </div>
                        <div class="row">
                            <div class="form-group col-lg-6">
                                <label for="session">Session</label>
                                <select name="session" id="session" class="form-control"
                                        placeholder="Choisir votre session" formControlName="session">
                                    <option value="principale">Principale</option>
                                    <option value="rattrapage">Rattrapage</option>
                                </select>
                                <small class="form-text text-muted danger" *ngIf="!regularForm.get('session').valid
                                 && (regularForm.get('session').dirty ||
                regularForm.get('session').touched)">Please
                                    enter a valid session!</small>
                            </div>
                            <div class="form-group col-lg-6">
                                <label for="classes">Class</label>
                                <select name="classes" id="classes" placeholder="Choisir votre class"
                                        class="form-control" formControlName="classes">
                                    <option *ngFor="let class of classes;let index=index;"
                                            value="{{class?.id}}">{{class.name}}</option>
                                </select>
                                <small class="form-text text-muted danger"
                                       *ngIf="!regularForm.get('classes').valid && (regularForm.get('classes').dirty ||
                                       regularForm.get('classes').touched)">classes
                                    required</small>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-4">
                                <label for="examsDate">Date d'examen</label>
                                <input type="date" class="form-control" id="examsDate" formControlName="examsDate"
                                       required/>
                                <small class="form-text text-muted danger"
                                       *ngIf="!regularForm.get('examsDate').valid && (regularForm.get('examsDate').dirty ||
                                   regularForm.get('examsDate').touched)">This
                                    exams Date is required!</small>
                            </div>
                            <div class="form-group col-md-4">
                                <label for="examsTime">Heure d'examen</label>
                                <input type="time" class="form-control" id="examsTime" formControlName="examsTime"
                                       required />
                                <small class="form-text text-muted danger"
                                       *ngIf="!regularForm.get('examsTime').valid && (regularForm.get('examsTime').dirty ||
                                   regularForm.get('examsTime').touched)">This
                                    exams Time is required!</small>
                            </div>
                            <div class="form-group col-md-4">
                                <label for="duration">Dur√©e d'examen</label>
                                <select name="duration" id="duration" class="form-control" (change)="onDate()"
                                        placeholder="Choisir votre duration" formControlName="duration">
                                    <option value="1">1 Heure</option>
                                    <option value="2">2 Heure</option>
                                    <option value="3">3 Heure</option>
                                </select>
                                <small class="form-text text-muted danger"
                                       *ngIf="!regularForm.get('duration').valid && (regularForm.get('duration').dirty
                                        || regularForm.get('duration').touched)">Please
                                    enter a valid duration!</small>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-6">
                                <label for="teachers">Enseignant</label>
                                <select class="form-control" id="teachers" formControlName="teachers"
                                        name="teachers"
                                        required>
                                    <option [value]="teacher?.id"
                                            *ngFor="let teacher of teachers">{{teacher?.name}}</option>
                                </select>
                                <small class="form-text text-muted danger"
                                       *ngIf="!regularForm.get('teachers').valid && (regularForm.get('teachers').dirty ||
                                   regularForm.get('teachers').touched)">This
                                    teachers is required!</small>
                            </div>
                            <div class="form-group col-md-6" >
                                <label for="salles">Salle</label>
                                <p  *ngIf="!available">Choisir les dates d'abord</p>
                                <select class="form-control" name="salles" id="salles" formControlName="salles" [hidden]="!available"
                                >
                                    <option [value]="salle?.id" *ngFor="let salle of salles">{{salle?.type}} {{salle?.number}}</option>
                                </select>
                                <small class="form-text text-muted danger"
                                       *ngIf="!regularForm.get('salles').valid && (regularForm.get('salles').dirty ||
                                   regularForm.get('salles').touched)">Thi
                                    salles is required!</small>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-lg-12">
                                <label for="etudiant">Etudiants</label>

                                <input type="file" id="etudiant" (change)="fileChangeEvent($event)"
                                       formControlName="student">
                                <small class="form-text text-muted danger"
                                       *ngIf="!regularForm.get('student').valid && (regularForm.get('student').dirty || regularForm.get('student').touched)">Please
                                    enter a valid student!</small>
                            </div>


                        </div>
                        <div class="form-group text-right">
                            <button type="button" class="btn btn-danger btn-raised mr-1">Cancel</button>
                            <button type="submit" class="btn btn-warning btn-raised" *ngIf="idExamen"
                                    (click)="editExamen()" >
                                Modifier
                            </button>
                            <button type="submit" class="btn btn-success btn-raised" *ngIf="!idExamen"
                                    (click)="addExamen()" [disabled]="!regularForm.valid">
                                Ajouter
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
